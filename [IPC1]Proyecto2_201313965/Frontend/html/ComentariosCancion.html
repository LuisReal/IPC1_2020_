<html>
    <head>
        
        <link href="../css/AdminComentarios.css" rel="stylesheet" >
        <link href="../css/navbar.css" rel="stylesheet" >
    </head>

    <body onload="mostrarComentarios(), mostrarPerfil()">

        <div class="banner-izquierdo">

            <label class="foto-perfil"></label>
            <h1 id="usuario" class="nombre-usuario"></h1>
            <button onclick="back()" type="button" class="btn-pagina-principal" >Pagina Principal</button>
            <button onclick="irPerfil()" type="button" class="btn-mi-perfil">Mi Perfil</button>
            <button type="button" onclick="back()" class="boton-back">Back</button>

        </div>

        <div id="info-container">

            <p class="p-tablacanciones">Informacion de los Comentarios</p>

            <table>
                <thead >

                    <tr>
                        <th>Usuario</th>
                        <th>Comentario</th>
                        <th>Cancion</th>
                        <th>Imagen</th>
                    </tr>
                </thead>
                <tbody id="tbody">

                </tbody>
            </table>

        </div>

        <script>
            function mostrarComentarios(){
                
                var id= sessionStorage.id //  proviene de administrador.html
                fetch(`http://3.129.19.112:8000/Comentarios/${id}`,

                ).then(response => response.json()
                ).catch(err =>{
                    console.log("no se pudo consumir la api")
                }).then(res =>{
                    console.log("Respuesta ",res)
                    
                        
                    for(i=0; i<(res.length); i++){
                        console.log(res [i])

                        
                        
                        var body = document.querySelector('#tbody')
                        body.innerHTML += 
                        `
                        <tr >
                            
                            <td>${res[i].usuario}</td>
                            <td>${res[i].comentario}</td>
                            <td>${res[i].nombre}</td>
                            <td><img src="${res[i].imagen}" height="100" width="100"><td>
                        </tr>
                        `     
                    }
                })
            }

            function mostrarPerfil(){
            
                fetch('http://3.129.19.112:8000/Admin',

                ).then(response => response.json()
                ).catch(err =>{
                    console.log("no se pudo consumir la api")
                }).then(res =>{
                    console.log(res)
                    
                        
                        var valor = res.admin // Proviene de ModificarPerfilAdministrador.html (Modificar()) 
                        
                        var h1 = document.querySelector('#usuario')
                            h1.innerHTML += 
                            `
                            <h1>${valor}</h1>
                            
                            ` 
                })
          
          }

            function back(){
                location.href="administrador.html"
            }

            function irPerfil(){
                location.href="ModificarPerfilAdministrador.html"
            }
        </script>

    </body>
</html>